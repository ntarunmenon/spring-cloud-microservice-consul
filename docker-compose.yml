version: '3.8'
services:
  consul-server:
    image: "consul"
    command: "agent -server -ui -node=server-1 -bootstrap-expect=1 -client=0.0.0.0"
    ports:
      - "8500:8500"
      - "8600:8600/udp"
  address-lookup-service-host:
    build: ./address-lookup-service
    ports:
      - "7090:7090"
    depends_on:
      - "consul-server"
  order-service-host:
    build: ./order-service
    ports:
      - "7071:7071"
    depends_on:
      - "consul-server"